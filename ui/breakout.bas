10 REM *** BREAKOUT ***
20 REM TRS-80 COCO BASIC
30 PMODE 4,1
40 SCREEN 1,1
50 REM PADDLE POSITION
60 PX = 112: PW = 30
70 REM BALL POSITION AND VELOCITY
80 BX = 128: BY = 150
90 DX = 2: DY = -2
100 REM SCORE AND LIVES
110 SC = 0: LV = 3
120 REM BRICK DATA (5 ROWS X 8 COLS)
130 DIM BR(5,8)
140 FOR R = 1 TO 5
150 FOR C = 1 TO 8
160 BR(R,C) = 1
170 NEXT C
180 NEXT R
190 NB = 40
200 REM === MAIN GAME LOOP ===
210 PCLS
220 REM DRAW BRICKS
230 FOR R = 1 TO 5
240 FOR C = 1 TO 8
250 IF BR(R,C) = 0 THEN 280
260 X1 = (C-1)*32: Y1 = (R-1)*8 + 10
270 LINE (X1,Y1)-(X1+30,Y1+6),1,BF
280 NEXT C
290 NEXT R
300 REM DRAW PADDLE
310 LINE (PX,180)-(PX+PW,184),1,BF
320 REM DRAW BALL
330 CIRCLE (BX,BY),3,1
340 REM CHECK KEYBOARD
350 K$ = INKEY$
360 IF K$ = "," OR K$ = "Z" THEN PX = PX - 8
370 IF K$ = "." OR K$ = "X" THEN PX = PX + 8
380 IF PX < 0 THEN PX = 0
390 IF PX > 225 THEN PX = 225
400 REM MOVE BALL
410 BX = BX + DX: BY = BY + DY
420 REM WALL BOUNCES
430 IF BX < 4 OR BX > 251 THEN DX = -DX
440 IF BY < 4 THEN DY = -DY
450 REM PADDLE BOUNCE
460 IF BY > 176 AND BY < 185 THEN GOSUB 700
470 REM BRICK COLLISION
480 IF BY < 60 THEN GOSUB 800
490 REM BALL LOST
500 IF BY > 192 THEN GOSUB 900
510 REM CHECK WIN
520 IF NB = 0 THEN GOTO 600
530 REM CHECK GAME OVER
540 IF LV = 0 THEN GOTO 650
550 GOTO 210
600 REM === YOU WIN ===
610 SCREEN 0,0
620 CLS
630 PRINT "YOU WIN! SCORE:"; SC
640 END
650 REM === GAME OVER ===
660 SCREEN 0,0
670 CLS
680 PRINT "GAME OVER! SCORE:"; SC
690 END
700 REM === PADDLE BOUNCE ===
710 IF BX < PX OR BX > PX + PW THEN RETURN
720 DY = -DY
730 REM ADD SPIN BASED ON HIT POSITION
740 HP = BX - PX - PW/2
750 DX = DX + SGN(HP)
760 IF DX > 4 THEN DX = 4
770 IF DX < -4 THEN DX = -4
780 IF DX = 0 THEN DX = 1
790 RETURN
800 REM === BRICK COLLISION ===
810 BC = INT(BX/32) + 1
820 BR = INT((BY-10)/8) + 1
830 IF BC < 1 OR BC > 8 THEN RETURN
840 IF BR < 1 OR BR > 5 THEN RETURN
850 IF BR(BR,BC) = 0 THEN RETURN
860 BR(BR,BC) = 0
870 DY = -DY
880 SC = SC + 10
890 NB = NB - 1
895 RETURN
900 REM === BALL LOST ===
910 LV = LV - 1
920 IF LV = 0 THEN RETURN
930 BX = 128: BY = 150
940 DX = 2: DY = -2
950 RETURN
